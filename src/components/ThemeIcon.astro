<button
  id="themeToggle"
  class="relative w-10 h-10 flex items-center justify-center overflow-hidden"
>
  <img id="sun-icon" class="absolute h-8 w-8 opacity-0 scale-0 rotate-90 transition-all duration-300" src="/sun.svg"/>
  <img id="moon-icon" class="absolute h-8 w-8 opacity-0 scale-0 -rotate-90 transition-all duration-300" src="/moon.svg"/>
</button>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const themeToggle = document.getElementById("themeToggle");
    const sunIcon = document.getElementById("sun-icon");
    const moonIcon = document.getElementById("moon-icon");

    const isDark = localStorage.getItem("theme") === "dark";
    document.documentElement.classList.toggle("dark", isDark);

    // Aplicar estado inicial sin animación visible
    if (isDark) {
      sunIcon.classList.remove("opacity-0", "scale-0", "rotate-90");
      moonIcon.classList.add("opacity-0", "scale-0", "-rotate-90");
    } else {
      sunIcon.classList.add("opacity-0", "scale-0", "rotate-90");
      moonIcon.classList.remove("opacity-0", "scale-0", "-rotate-90");
    }

    // Asegurar que las animaciones se activen solo después de la carga inicial
    requestAnimationFrame(() => {
      sunIcon.classList.add("transition-all", "duration-300");
      moonIcon.classList.add("transition-all", "duration-300");
    });

    themeToggle.addEventListener("click", () => {
      const nowDark = document.documentElement.classList.toggle("dark");
      localStorage.setItem("theme", nowDark ? "dark" : "light");

      // Aplicar animación al cambio de tema
      if (nowDark) {
        sunIcon.classList.remove("opacity-0", "scale-0", "rotate-90");
        moonIcon.classList.add("opacity-0", "scale-0", "-rotate-90");
      } else {
        sunIcon.classList.add("opacity-0", "scale-0", "rotate-90");
        moonIcon.classList.remove("opacity-0", "scale-0", "-rotate-90");
      }
    });
  });
</script>
